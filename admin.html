<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Admin | Yngrid</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style> 
        body { background: #FFF0F5; padding-bottom: 0; } 
        .admin-container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; border: 1px solid #ffeef5; }
        .badge { padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: bold; text-transform: uppercase; }
        .badge-pending { background: #fff3cd; color: #856404; }
        .badge-success { background: #d4edda; color: #155724; }
        .admin-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        h2 { color: #FF69B4; font-family: 'Montserrat', sans-serif; }
    </style>
</head>
<body>

    <div class="admin-container">
        <div class="admin-header">
            <h2 style="margin: 0;">Painel de Controle ðŸŒ¸</h2>
            <a href="index.html" target="_blank" class="btn-pink" style="padding: 10px 20px; font-size: 0.8rem;">
                <i class="fas fa-eye"></i> Ver Site
            </a>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
            <div class="card" style="text-align: center; border-left: 5px solid #FF69B4;">
                <span style="font-size: 2rem; font-weight: bold; color: #333;" id="totalCount">0</span>
                <p style="margin: 0; font-size: 0.8rem; color: #FF69B4; font-weight: bold;">CLIENTES</p>
            </div>
            <div class="card" style="text-align: center; border-left: 5px solid #28a745;">
                <span style="font-size: 2rem; font-weight: bold; color: #333;" id="moneyCount">R$ 0</span>
                <p style="margin: 0; font-size: 0.8rem; color: #28a745; font-weight: bold;">ESTIMADO</p>
            </div>
        </div>

        <div class="card">
            <h3 style="font-size: 1.2rem; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; color: #333;">
                Agenda Recente
                <button onclick="loadAppointments()" style="float: right; border: none; background: none; cursor: pointer; color: #FF69B4;"><i class="fas fa-sync"></i></button>
            </h3>
            <div id="listContainer"></div>
        </div>
    </div>

    <script>
        window.onload = loadAppointments;
        function loadAppointments() {
            const bookings = JSON.parse(localStorage.getItem('yngrid_appointments')) || [];
            const container = document.getElementById('listContainer');
            document.getElementById('totalCount').innerText = bookings.length;
            let totalMoney = 0;

            if (bookings.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999; padding: 20px;">Nenhum agendamento ainda.</p>';
                document.getElementById('moneyCount').innerText = 'R$ 0';
                return;
            }

            bookings.sort((a, b) => b.id - a.id);
            let html = '';
            bookings.forEach(b => {
                if(b.service.includes('150')) totalMoney += 150;
                else if(b.service.includes('180')) totalMoney += 180;
                else if(b.service.includes('120')) totalMoney += 120;
                else totalMoney += 90;

                let dateParts = b.date.split('-');
                let dateFormatted = `${dateParts[2]}/${dateParts[1]}`;
                let badge = b.status === 'pendente' ? `<span class="badge badge-pending">Pendente</span>` : `<span class="badge badge-success">Confirmado</span>`;

                html += `
                    <div style="border-bottom: 1px solid #f9f9f9; padding: 15px 0; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: bold; font-size: 1rem; color: #333;">${b.name}</div>
                            <div style="font-size: 0.85rem; color: #FF69B4;">${b.service}</div>
                            <div style="font-size: 0.8rem; color: #888; margin-top: 4px;"><i class="far fa-calendar"></i> ${dateFormatted} Ã s ${b.time}</div>
                        </div>
                        <div style="text-align: right; display: flex; flex-direction: column; gap: 8px; align-items: flex-end;">
                            ${badge}
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <a href="https://wa.me/55${b.phone.replace(/\D/g,'')}" target="_blank" style="color: #25D366; font-size: 1.3rem;"><i class="fab fa-whatsapp"></i></a>
                                <button onclick="confirmItem(${b.id})" style="border: none; background: none; color: #28a745; cursor: pointer; font-size: 1.1rem;"><i class="fas fa-check-circle"></i></button>
                                <button onclick="deleteItem(${b.id})" style="border: none; background: none; color: #dc3545; cursor: pointer; font-size: 1.1rem;"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
            document.getElementById('moneyCount').innerText = 'R$ ' + totalMoney;
        }
        function confirmItem(id) {
            let bookings = JSON.parse(localStorage.getItem('yngrid_appointments')) || [];
            bookings = bookings.map(b => b.id === id ? {...b, status: 'confirmado'} : b);
            localStorage.setItem('yngrid_appointments', JSON.stringify(bookings));
            loadAppointments();
        }
        function deleteItem(id) {
            if(confirm('Tem certeza que deseja excluir?')) {
                let bookings = JSON.parse(localStorage.getItem('yngrid_appointments')) || [];
                bookings = bookings.filter(b => b.id !== id);
                localStorage.setItem('yngrid_appointments', JSON.stringify(bookings));
                loadAppointments();
            }
        }
    </script>
</body>
</html>